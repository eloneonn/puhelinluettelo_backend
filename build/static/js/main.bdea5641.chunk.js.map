{"version":3,"sources":["components/Person.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["Person","person","handler","console","log","name","number","onClick","baseUrl","exportedObject","getAll","axios","get","create","newObject","post","update","id","put","remove","delete","all","props","spread","Notification","message","className","App","useState","persons","setPersons","newName","setNewName","newNumber","setNewNumber","newFilter","setNewFilter","errorMessage","setErrorMessage","useEffect","numberService","then","response","data","handleNameChange","event","target","value","handleNumberChange","handleFilterChange","handleDelete","window","confirm","setTimeout","addPerson","preventDefault","personObject","find","updatePerson","concat","catch","error","onChange","arr","query","filter","el","toLowerCase","indexOf","map","filterForm","onSubmit","type","length","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.bdea5641.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Person = ({person, handler}) => {\r\n  console.log('Rendering person:', person)\r\n  return (\r\n    <li>\r\n      {person.name} {person.number} <button onClick={() => handler(person)}>delete</button>\r\n    </li>\r\n  )\r\n}\r\nexport default Person","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    return axios.get(baseUrl)\r\n  }\r\n  \r\n  const create = newObject => {\r\n    return axios.post(baseUrl, newObject)\r\n  }\r\n  \r\n  const update = (id, newObject) => {\r\n    return axios.put(`${baseUrl}/${id}`, newObject)\r\n  }\r\n\r\n  const remove = (id) => {\r\n    return axios.delete(`${baseUrl}/${id}`)\r\n  }\r\n\r\n  const all = (props) => {\r\n    return axios.all(props)\r\n  }\r\n\r\n  const spread = (props) => {\r\n    return axios.spread(props)\r\n  }\r\n\r\nconst exportedObject = {\r\n    getAll,\r\n    create,\r\n    update,\r\n    remove,\r\n    all,\r\n    spread\r\n}\r\n\r\nexport default exportedObject","import React from \"react\";\r\n\r\nconst Notification = ({ message }) => {\r\n    if (message === null) {\r\n      return null\r\n    }\r\n  \r\n    return (\r\n      <div className=\"error\">\r\n        {message}\r\n      </div>\r\n    )\r\n  }\r\n  \r\n\r\nexport default Notification","import React, { useState, useEffect } from 'react'\nimport Person from './components/Person.js'\nimport numberService from './services/persons'\nimport Notification from './components/Notification.js'\nimport './App.css'\n\nconst App = () => {\n  const [ persons, setPersons] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ newFilter, setNewFilter ] = useState('')\n  const [ errorMessage, setErrorMessage ] = useState(null)\n\n\n    // ON STARTUP\n\n  useEffect(() => {\n    console.log(' Calling server... (Effect)')\n    numberService\n      .getAll()\n      .then(response => {\n        setPersons(response.data)\n      })\n  }, [])\n\n    //EVENT HANDLERS\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleFilterChange = (event) => {\n    setNewFilter(event.target.value)\n  }\n\n  const handleDelete = (person) => {\n    console.log('Clicked on',person.name,'// id:', person.id)\n\n    if (window.confirm(`Delete ${person.name}?`)) {\n      numberService.remove(person.id)\n      .then(() => numberService.getAll())\n      .then(response => {\n        setPersons(response.data)\n      })\n\n      setErrorMessage(\n        `'${person.name}' was removed from the phonebook`\n      )\n      setTimeout(() => {\n        setErrorMessage(null)\n      }, 5000)\n\n    } else {\n      console.log(`Did not delete ${person.name}`)\n    }\n  }\n\n    // LOGIC COMPONENTS\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    console.log('clicked', event.target)\n    const personObject = {\n      name: newName,\n      number: newNumber,\n    }\n\n    if (persons.find(person => person.name === newName)) {\n      updatePerson(personObject)\n    } else {\n        numberService\n        .create(personObject)\n        .then(response => {\n          setPersons(persons.concat(response.data))\n        })\n        setErrorMessage(\n          `'${newName}' was added to the phonebook`\n        )\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)\n    }\n    setNewName('')  \n    setNewNumber('')\n  }\n  \n  const updatePerson = (personObject) => {\n    if(window.confirm(`${personObject.name} is already added to phonebook, replace the old number with a new one?`)) {\n      numberService\n      .update(persons.find(person => person.name === personObject.name).id, personObject)\n      .catch(error => {\n        setErrorMessage(\n          `The information of '${personObject.name}' was already removed from the server`\n        )\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)      \n      })\n      .then(() => numberService.getAll()\n      .then(response => {\n        setPersons(response.data)\n      }))\n\n      setErrorMessage(\n        `The number of '${personObject.name}' was replaced`\n      )\n      setTimeout(() => {\n        setErrorMessage(null)\n      }, 5000)\n\n      console.log('Replaced number of', personObject.name)\n    } else {\n      console.log('Did not replace number of', personObject.name)\n    }\n  }\n\n  const filterElements = (arr, query) => {\n    if (newFilter === '') {\n      return []\n    } else {\n      return arr.filter(el => el.name.toLowerCase().indexOf(query.toLowerCase()) !== -1)\n    } \n  }\n\n    // RENDERING COMPONENTS\n\n  const filterForm = () => {\n    return (        \n      <form>\n        <div>\n          filter shown with\n          <input \n            value={newFilter}\n            onChange={handleFilterChange}\n          />\n          <ul>\n            {filterElements(persons, newFilter).map(person => \n            <Person key={person.name} person={person} handler={handleDelete}/>\n            )}\n          </ul>\n        </div>\n      </form>\n    )\n  }\n\n  const additionForm = () => {\n    return (\n      <form onSubmit={addPerson}>\n        <div>\n          name: \n          <input \n            value={newName} \n            onChange={handleNameChange}\n          />\n        </div>\n        <div>\n          number: \n          <input \n            value={newNumber} \n            onChange={handleNumberChange}\n          />\n        </div>\n\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n    )\n  }\n\n  const numberList = () => {\n    console.log(' Rendering', persons.length, 'persons...')\n\n    return (\n      <ul>\n        {persons.map(person => \n          <Person key={person.name} person={person} handler={handleDelete} />\n        )} \n      </ul>\n    )\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={errorMessage} />\n      {filterForm()}\n\n      <h2>add a new</h2>\n      {additionForm()}\n\n      <h2>Numbers</h2>\n      {numberList()}\n    </div>\n  )\n\n}\n\nexport default App","import ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(\n  <App />, \n  document.getElementById('root')\n)\n"],"sourceRoot":""}