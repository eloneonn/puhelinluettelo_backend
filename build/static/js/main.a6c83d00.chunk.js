(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{40:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var o=t(16),c=t.n(o),a=t(4),r=t(2),u=t(0),i=function(e){var n=e.person,t=e.handler;return console.log("Rendering person:",n),Object(u.jsxs)("li",{children:[n.name," ",n.number," ",Object(u.jsx)("button",{onClick:function(){return t(n)},children:"delete"})]})},l=t(3),s=t.n(l),d="https://radiant-tundra-19122.herokuapp.com/api/persons",f={getAll:function(){return s.a.get(d)},create:function(e){return s.a.post(d,e)},update:function(e,n){return s.a.put("".concat(d,"/").concat(e),n)},remove:function(e){return s.a.delete("".concat(d,"/").concat(e))},all:function(e){return s.a.all(e)},spread:function(e){return s.a.spread(e)}},j=function(e){var n=e.message;return null===n?null:Object(u.jsx)("div",{className:"error",children:n})},h=(t(40),function(){var e=Object(r.useState)([]),n=Object(a.a)(e,2),t=n[0],o=n[1],c=Object(r.useState)(""),l=Object(a.a)(c,2),s=l[0],d=l[1],h=Object(r.useState)(""),b=Object(a.a)(h,2),m=b[0],p=b[1],O=Object(r.useState)(""),g=Object(a.a)(O,2),v=g[0],x=g[1],w=Object(r.useState)(null),k=Object(a.a)(w,2),C=k[0],S=k[1];Object(r.useEffect)((function(){console.log(" Calling server... (Effect)"),f.getAll().then((function(e){o(e.data)}))}),[]);var T=function(e){d(e.target.value)},y=function(e){p(e.target.value)},A=function(e){x(e.target.value)},D=function(e){console.log("Clicked on",e.name,"// id:",e.id),window.confirm("Delete ".concat(e.name,"?"))?(f.remove(e.id).then((function(){return f.getAll()})).then((function(e){o(e.data)})),S("'".concat(e.name,"' was removed from the phonebook")),setTimeout((function(){S(null)}),5e3)):console.log("Did not delete ".concat(e.name))},E=function(e){e.preventDefault(),console.log("clicked",e.target);var n={name:s,number:m};t.find((function(e){return e.name===s}))?R(n):(f.create(n).then((function(e){o(t.concat(e.data))})),S("'".concat(s,"' was added to the phonebook")),setTimeout((function(){S(null)}),5e3)),d(""),p("")},R=function(e){window.confirm("".concat(e.name," is already added to phonebook, replace the old number with a new one?"))?(f.update(t.find((function(n){return n.name===e.name})).id,e).catch((function(n){S("The information of '".concat(e.name,"' was already removed from the server")),setTimeout((function(){S(null)}),5e3)})).then((function(){return f.getAll().then((function(e){o(e.data)}))})),S("The number of '".concat(e.name,"' was replaced")),setTimeout((function(){S(null)}),5e3),console.log("Replaced number of",e.name)):console.log("Did not replace number of",e.name)};return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(j,{message:C}),function(){return Object(u.jsx)("form",{children:Object(u.jsxs)("div",{children:["filter shown with",Object(u.jsx)("input",{value:v,onChange:A}),Object(u.jsx)("ul",{children:(e=t,n=v,""===v?[]:e.filter((function(e){return-1!==e.name.toLowerCase().indexOf(n.toLowerCase())}))).map((function(e){return Object(u.jsx)(i,{person:e,handler:D},e.name)}))})]})});var e,n}(),Object(u.jsx)("h2",{children:"add a new"}),Object(u.jsxs)("form",{onSubmit:E,children:[Object(u.jsxs)("div",{children:["name:",Object(u.jsx)("input",{value:s,onChange:T})]}),Object(u.jsxs)("div",{children:["number:",Object(u.jsx)("input",{value:m,onChange:y})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]}),Object(u.jsx)("h2",{children:"Numbers"}),(console.log(" Rendering",t.length,"persons..."),Object(u.jsx)("ul",{children:t.map((function(e){return Object(u.jsx)(i,{person:e,handler:D},e.name)}))}))]})});c.a.render(Object(u.jsx)(h,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.a6c83d00.chunk.js.map